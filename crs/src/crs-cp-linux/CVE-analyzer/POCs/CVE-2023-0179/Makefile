OBJS := out/helpers.o out/exploit.o out/CVE-2023-0179.o
BIN := out/CVE-2023-0179

all: $(BIN)

out/CVE-2023-0179: $(OBJS) | out
	$(CC) $(CFLAGS) $(OBJS) -lmnl -lnftnl -o $@

out/%.o: %.c | out
	$(CC) -c $(CFLAGS) -o "$@" "$<"

clean:
	rm -rf out

out:
	mkdir -p out

.PHONY: all clean
