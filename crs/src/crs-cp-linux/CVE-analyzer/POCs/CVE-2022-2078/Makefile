OBJS := out/helper.o out/CVE-2022-2078.o
BIN := out/CVE-2022-2078

all: $(BIN)

out/CVE-2022-2078: $(OBJS) | out
	$(CC) $(CFLAGS) $(OBJS) -o $@ -lmnl -lnftnl -lpthread -no-pie

out/%.o: %.c | out
	$(CC) -c $(CFLAGS) -o "$@" "$<"

clean:
	rm -rf out

out:
	mkdir -p out

.PHONY: all clean
