diff --git a/include/net/net_namespace.h b/include/net/net_namespace.h
index 12689ddfc24c..a68ced28d8f4 100644
--- a/include/net/net_namespace.h
+++ b/include/net/net_namespace.h
@@ -59,7 +59,6 @@ struct net {
 						 */
 	spinlock_t		rules_mod_lock;
 
-	u32			hash_mix;
 	atomic64_t		cookie_gen;
 
 	struct list_head	list;		/* list of network namespaces */
diff --git a/include/net/netns/hash.h b/include/net/netns/hash.h
index d9b665151f3d..16a842456189 100644
--- a/include/net/netns/hash.h
+++ b/include/net/netns/hash.h
@@ -2,10 +2,16 @@
 #ifndef __NET_NS_HASH_H__
 #define __NET_NS_HASH_H__
 
-#include <net/net_namespace.h>
+#include <asm/cache.h>
+
+struct net;
 
 static inline u32 net_hash_mix(const struct net *net)
 {
-	return net->hash_mix;
+#ifdef CONFIG_NET_NS
+	return (u32)(((unsigned long)net) >> ilog2(sizeof(*net)));
+#else
+	return 0;
+#endif
 }
 #endif
diff --git a/net/core/net_namespace.c b/net/core/net_namespace.c
index 7e6dcc625701..17f36317363d 100644
--- a/net/core/net_namespace.c
+++ b/net/core/net_namespace.c
@@ -304,7 +304,6 @@ static __net_init int setup_net(struct net *net, struct user_namespace *user_ns)
 
 	refcount_set(&net->count, 1);
 	refcount_set(&net->passive, 1);
-	get_random_bytes(&net->hash_mix, sizeof(u32));
 	net->dev_base_seq = 1;
 	net->user_ns = user_ns;
 	idr_init(&net->netns_ids);
