diff --git a/kernel/module/decompress.c b/kernel/module/decompress.c
index 720e719253cd..c033572d83f0 100644
--- a/kernel/module/decompress.c
+++ b/kernel/module/decompress.c
@@ -114,8 +114,8 @@ static ssize_t module_gzip_decompress(struct load_info *info,
 	do {
 		struct page *page = module_get_next_page(info);
 
-		if (IS_ERR(page)) {
-			retval = PTR_ERR(page);
+		if (!page) {
+			retval = -ENOMEM;
 			goto out_inflate_end;
 		}
 
@@ -173,8 +173,8 @@ static ssize_t module_xz_decompress(struct load_info *info,
 	do {
 		struct page *page = module_get_next_page(info);
 
-		if (IS_ERR(page)) {
-			retval = PTR_ERR(page);
+		if (!page) {
+			retval = -ENOMEM;
 			goto out;
 		}
 
